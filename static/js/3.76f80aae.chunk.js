webpackJsonp([3],{3418:function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),l=n.n(i),c=n(2),u=n.n(c),h=n(165),d=n(553),m=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),f=function(e){function t(e){r(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.startAutoPlay=function(){if(n.state.currentIndex>0){var e=document.getElementsByClassName("p-button-right")[0];e&&e.click()}else{var t=document.getElementsByClassName("p-button-home")[0];t&&t.click()}},n.checkCover=function(){for(var e=n.state.right,t=0,a=0;a<e.length;a++)e[a].classList.contains("flip")&&t++;return t},n.handleTurnRight=function(){var e=n.state,t=e.z,a=e.currentIndex,r=e.right;if(a>=0)n.setState(function(e){return{currentIndex:e.currentIndex-1}});else{n.setState({currentIndex:r.length-1});for(var s=0;s<r.length;s++)r[s].className="p-right",r[s].style.zIndex="auto",n.setState({z:1})}if(a>=0&&(r[a].classList.add("flip"),n.setState(function(e){return{z:e.z+1}}),setTimeout(function(){r[a].style.zIndex=t},250)),n.checkCover()===r.length){document.getElementsByClassName("p-container")[0].style.transform="translateX(-25%)"}else if(n.checkCover()<r.length){var o=document.getElementsByClassName("p-container")[0];o.style.transform="translateX(-50%)"}},n.handleTurnLeft=function(){var e=n.state,t=e.currentIndex,a=e.right;if(t<a.length-1)n.setState(function(e){return{currentIndex:e.currentIndex+1}});else{n.setState({currentIndex:0});for(var r=a.length-1;r>=0;r--)a[r].classList.add("flip"),a[r].style.zIndex=a.length-r}if(t>=-1&&a[t+1]&&(a[t+1].className="p-right",setTimeout(function(){a[t+1].style.zIndex="auto"},300)),n.checkCover()<a.length){document.getElementsByClassName("p-container")[0].style.transform="translateX(-50%)"}if(0===n.checkCover()){document.getElementsByClassName("p-container")[0].style.transform="translateX(-75%)"}},n.handleTurnHome=function(){for(var e=n.state.right,t=0;t<e.length;t++)!function(t){e[t].className="p-right",n.setState({z:1}),setTimeout(function(){e[t].style.zIndex="auto"},300)}(t);n.setState({currentIndex:e.length-1}),document.getElementsByClassName("p-container")[0].style.transform="translateX(-75%)"},n.handleTurnEnd=function(){var e=n.state,t=e.right,a=e.odd;if(1===a)for(var r=t.length-1;r>=0;r--)!function(e){t[e].className="p-right flip",setTimeout(function(){t[e].style.zIndex=t.length-e},300)}(r);else for(var r=t.length-1;r>0;r--)!function(e){t[e].className="p-right flip",setTimeout(function(){t[e].style.zIndex=t.length-e},300)}(r);if(n.setState({currentIndex:1===a?-1:0}),0===a){document.getElementsByClassName("p-container")[0].style.transform="translateX(-50%)"}else{document.getElementsByClassName("p-container")[0].style.transform="translateX(-25%)"}},n.handleAutoPlay=function(){var e=n.state.autoPlay;n.setState(function(e){return{autoPlay:!e.autoPlay}}),e?(clearInterval(n.intervalId),console.log("ðŸš€ ~ FlipBook ~ else:",e)):(n.intervalId=setInterval(n.startAutoPlay,1e3*(n.props.delay||10)),console.log("ðŸš€ ~ FlipBook ~ if:",e))},n.renderBookCovers=function(){for(var e=n.state,t=e.images,a=(e.right,[]),r=0;r<t.length;r+=2)a.push(l.a.createElement("div",{key:r,className:"p-right"},t[r+1]&&l.a.createElement("a",{className:"p-front",style:{backgroundImage:"url(https://cdn.emartmall.mn/"+t[r+1].img+")",backgroundRepeat:"no-repeat",width:"100%",height:"100%",backgroundSize:"contain"}}," "),t[r].white?l.a.createElement("a",{className:"p-back",style:{backgroundColor:"white",backgroundRepeat:"no-repeat",width:"100%",height:"100%",backgroundSize:"contain"}}," "):l.a.createElement("a",{className:"p-back",id:r===t.length-1?"cover":"",style:{backgroundImage:"url(https://cdn.emartmall.mn/"+t[r].img+")",backgroundRepeat:"no-repeat",width:"100%",height:"100%",backgroundSize:"contain"}}," ")));return a},n.state={images:n.props.images||[],right:document.getElementsByClassName("p-right"),currentIndex:0,z:1,width:n.props.width,height:n.props.height,odd:1,cover:!0,autoPlay:!0},n}return o(t,e),m(t,[{key:"componentDidMount",value:function(){var e=this.props.images,t=this.state.right;e.length%2==1?(e=[].concat(a(e),[{href:"",white:!0}]),this.setState({odd:0})):this.setState({odd:1});var n=window.matchMedia("(max-width: 700px)");this.setState({currentIndex:t.length-1,images:e.reverse(),width:n.matches?0:2*this.props.width}),this.intervalId=setInterval(this.startAutoPlay,1e3*(this.props.delay||10))}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){return l.a.createElement("div",{className:"p-book-section"},l.a.createElement("div",{className:"p-container",style:{width:0!==this.state.width?this.state.width+"px":"",padding:0!==this.state.width?"":"2px 0",height:this.state.height+"px",transform:"translateX(-75%)"}},this.renderBookCovers()),l.a.createElement("div",{className:"p-button-container"},l.a.createElement("button",{className:"p-button-home",onClick:this.handleTurnHome,disabled:this.state.currentIndex>=this.state.right.length-1},l.a.createElement(h.e,null)),l.a.createElement("button",{onClick:this.handleTurnLeft,disabled:this.state.currentIndex>=this.state.right.length-1},l.a.createElement(h.g,null)),l.a.createElement("button",{onClick:this.handleTurnRight,className:"p-button-right",disabled:1===this.state.odd?-1===this.state.currentIndex:0===this.state.currentIndex},l.a.createElement(h.j,null)),l.a.createElement("button",{onClick:this.handleTurnEnd,disabled:1===this.state.odd?-1===this.state.currentIndex:0===this.state.currentIndex},l.a.createElement(h.f,null)),l.a.createElement("button",{onClick:this.handleAutoPlay},this.state.autoPlay?l.a.createElement(h.i,null):l.a.createElement(h.b,null))))}}]),t}(l.a.Component);f.propTypes={images:u.a.array.isRequired,width:u.a.number.isRequired,height:u.a.number.isRequired},t.default=f}});