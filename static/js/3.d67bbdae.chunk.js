webpackJsonp([3],{3419:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),o=n.n(s),l=n(2),u=n.n(l),c=n(9),h=n(165),d=n(554),f=(n.n(d),function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}()),p=function(t){function e(t){a(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.startAutoPlay=function(){if(n.state.currentIndex>0){var t=document.getElementsByClassName("p-button-right")[0];t&&t.click()}else{var e=document.getElementsByClassName("p-button-home")[0];e&&e.click()}},n.checkCover=function(){for(var t=n.state.right,e=0,a=0;a<t.length;a++)t[a].classList.contains("flip")&&e++;return e},n.handleTurnRight=function(){var t=n.state,e=t.z,a=t.currentIndex,r=t.right;if(a>=0)n.setState(function(t){return{currentIndex:t.currentIndex-1}});else{n.setState({currentIndex:r.length-1});for(var i=0;i<r.length;i++)r[i].className="p-right",r[i].style.zIndex="auto",n.setState({z:1})}a>=0&&(r[a].classList.add("flip"),n.setState(function(t){return{z:t.z+1}}),setTimeout(function(){r[a].style.zIndex=e},250))},n.handleTurnLeft=function(){var t=n.state,e=t.currentIndex,a=t.right;if(e<a.length-1)n.setState(function(t){return{currentIndex:t.currentIndex+1}});else{n.setState({currentIndex:0});for(var r=a.length-1;r>=0;r--)a[r].classList.add("flip"),a[r].style.zIndex=a.length-r}e>=-1&&a[e+1]&&(a[e+1].className="p-right",setTimeout(function(){a[e+1].style.zIndex="auto"},300))},n.handleTurnHome=function(){for(var t=n.state.right,e=0;e<t.length;e++)!function(e){t[e].className="p-right",n.setState({z:1}),setTimeout(function(){t[e].style.zIndex="auto"},300)}(e);n.setState({currentIndex:t.length-1})},n.handleTurnEnd=function(){var t=n.state,e=t.right,a=t.odd;if(1===a)for(var r=e.length-1;r>=0;r--)!function(t){e[t].className="p-right flip",setTimeout(function(){e[t].style.zIndex=e.length-t},300)}(r);else for(var r=e.length-1;r>0;r--)!function(t){e[t].className="p-right flip",setTimeout(function(){e[t].style.zIndex=e.length-t},300)}(r);n.setState({currentIndex:1===a?-1:0})},n.handleAutoPlay=function(){var t=n.state.autoPlay;n.setState(function(t){return{autoPlay:!t.autoPlay}}),t?clearInterval(n.intervalId):n.intervalId=setInterval(n.startAutoPlay,1e3*(n.props.delay||10))},n.renderBookCovers=function(){for(var t=n.state.images,e=[],a=0;a<t.length;a++)e.push(o.a.createElement("div",{key:a,className:"p-right"},t[a].white?o.a.createElement("div",{className:"p-front",style:{backgroundColor:"white",backgroundRepeat:"no-repeat",width:"100%",height:"100%",backgroundSize:"contain"}}," "):o.a.createElement(c.b,{to:t[a].link||"/",className:"p-front",style:{backgroundImage:"url(https://cdn.emartmall.mn/"+t[a].img+")",backgroundRepeat:"no-repeat",width:"100%",height:"100%",backgroundSize:"contain"}}," ")));return e},n.state={images:n.props.images||[],right:document.getElementsByClassName("p-right"),currentIndex:0,z:1,width:n.props.width,height:n.props.height,odd:0,cover:!0,autoPlay:!0},n}return i(e,t),f(e,[{key:"componentDidMount",value:function(){var t=(this.props.images,this.state.right),e=window.matchMedia("(max-width: 700px)");this.setState({currentIndex:t.length-1,width:e.matches?0:2*this.props.width}),this.intervalId=setInterval(this.startAutoPlay,1e3*(this.props.delay||10))}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){return console.log("flipbook"),o.a.createElement("div",{className:"p-book-section"},o.a.createElement("div",{className:"p-container",style:{width:0!==this.state.width?this.state.width+"px":"",padding:0!==this.state.width?"":"2px 0",height:this.state.height+"px",transform:"translateX(-75%)"}},this.renderBookCovers()),o.a.createElement("div",{className:"p-button-container"},o.a.createElement("button",{className:"p-button-home",onClick:this.handleTurnHome,disabled:this.state.currentIndex>=this.state.right.length-1},o.a.createElement(h.e,null)),o.a.createElement("button",{onClick:this.handleTurnLeft,disabled:this.state.currentIndex>=this.state.right.length-1},o.a.createElement(h.g,null)),o.a.createElement("button",{onClick:this.handleTurnRight,className:"p-button-right",disabled:1===this.state.odd?-1===this.state.currentIndex:0===this.state.currentIndex},o.a.createElement(h.j,null)),o.a.createElement("button",{onClick:this.handleTurnEnd,disabled:1===this.state.odd?-1===this.state.currentIndex:0===this.state.currentIndex},o.a.createElement(h.f,null)),o.a.createElement("button",{onClick:this.handleAutoPlay},this.state.autoPlay?o.a.createElement(h.i,null):o.a.createElement(h.b,null))))}}]),e}(o.a.Component);p.propTypes={images:u.a.array.isRequired,width:u.a.number.isRequired,height:u.a.number.isRequired},e.default=p}});